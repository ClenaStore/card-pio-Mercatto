<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mercatto Delícia — Cardápio</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1220; --paper:#0e172a; --ink:#e6eefc; --muted:#a8b3c7; --line:#1e293b;
  --brand:#06b6d4; --accent:#86efac; --shadow:0 10px 30px rgba(0,0,0,.45);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:var(--bg);color:var(--ink);font-family:'Inter',system-ui;-webkit-font-smoothing:antialiased;overflow:hidden}

/* TOPO */
header{
  position:fixed;top:0;left:0;right:0;z-index:50;
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 16px;background:rgba(0,0,0,.4);backdrop-filter:blur(10px);
}
header h1{font-size:16px;font-weight:800}
header input{
  background:rgba(255,255,255,.1);border:none;border-radius:8px;
  padding:8px 12px;color:white;width:50vw;max-width:280px;
}

/* CONTEÚDO */
#book{
  position:relative;
  height:100%;width:100%;
  display:flex;align-items:center;justify-content:center;
  overflow:hidden;
}
.page{
  position:absolute;
  top:0;left:0;right:0;bottom:0;
  background:var(--paper);
  border-radius:10px;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.05),0 0 25px rgba(0,0,0,.6);
  padding:80px 20px 70px;
  overflow-y:auto;scrollbar-width:none;
  transition:transform 0.6s ease,opacity 0.6s ease;
}
.page.hide{opacity:0;transform:scale(.95);pointer-events:none;}
.page.show{opacity:1;transform:scale(1);z-index:10;}
.page h2{font-size:22px;margin-bottom:12px;text-align:center;color:var(--brand)}
.grid{display:grid;grid-template-columns:1fr;gap:12px}
.card{
  background:rgba(255,255,255,.05);
  border-radius:10px;padding:10px;display:flex;gap:10px;
}
.thumb{
  width:100px;height:100px;border-radius:8px;overflow:hidden;
  flex-shrink:0;background:#111;display:grid;place-items:center;
}
.thumb img{width:100%;height:100%;object-fit:cover;cursor:zoom-in}
.thumb .noimg{font-size:12px;color:var(--muted);text-align:center}
.meta{flex:1}
.name{font-weight:700;margin-bottom:4px}
.desc{font-size:13px;color:var(--muted);margin-bottom:4px}
.price{font-weight:800;color:#fff}

/* CAPA */
.capa{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  text-align:center;height:100%;
}
.capa .box{
  width:100%;height:60%;max-width:600px;border-radius:12px;
  border:2px dashed rgba(255,255,255,.15);display:grid;place-items:center;overflow:hidden;
}
.capa .box img{width:100%;height:100%;object-fit:cover}
.capa h2{margin-top:20px;font-size:28px}

/* BOTÕES */
.nav{
  position:fixed;bottom:15px;left:0;right:0;z-index:20;
  display:flex;justify-content:space-between;padding:0 25px;
}
.nav button{
  background:rgba(255,255,255,.1);
  border:none;color:white;
  font-size:20px;border-radius:50%;
  width:50px;height:50px;cursor:pointer;
  box-shadow:0 0 10px rgba(0,0,0,.4);
}
.nav button:active{transform:scale(.95)}

/* MODAL GERAL */
.modal{
  position:fixed;inset:0;display:none;place-items:center;
  background:rgba(0,0,0,.6);backdrop-filter:blur(6px);z-index:100;
}
.modal.show{display:grid}
.modal .box{
  background:var(--paper);border-radius:10px;max-width:90vw;max-height:85vh;
  overflow:auto;padding:16px;box-shadow:var(--shadow);
}
.modal img{width:100%;border-radius:10px;margin-bottom:10px}

/* GALERIA */
.carousel{position:relative;aspect-ratio:16/9;background:#000;border-radius:10px;overflow:hidden}
.carousel img,.carousel video{width:100%;height:100%;object-fit:cover}
.carousel .navc{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center}
.carousel button{background:rgba(0,0,0,.4);border:none;color:white;font-size:22px;margin:0 10px;border-radius:50%;width:40px;height:40px}
.carousel .dots{position:absolute;bottom:8px;left:50%;transform:translateX(-50%);display:flex;gap:6px}
.carousel .dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.4)}
.carousel .dot.active{background:white}
</style>
</head>
<body>

<header>
  <h1>Mercatto Delícia</h1>
  <input type="search" id="search" placeholder="Pesquisar...">
</header>

<div id="book"></div>

<div class="nav">
  <button id="prevBtn">←</button>
  <button id="nextBtn">→</button>
</div>

<!-- Modal Banner -->
<div id="modalBanner" class="modal">
  <div class="box" id="bannerContent"></div>
</div>

<!-- Modal Galeria -->
<div id="modalGallery" class="modal">
  <div class="box">
    <div class="carousel">
      <div id="galleryViewport"></div>
      <div class="navc">
        <button id="gPrev">‹</button>
        <button id="gNext">›</button>
      </div>
      <div id="galleryDots" class="dots"></div>
    </div>
    <p id="galleryDesc" style="margin-top:10px;font-size:13px;color:var(--muted)"></p>
  </div>
</div>

<script>
/* ====== CONFIGURAÇÃO DE BANNERS POR DIA/HORÁRIO ====== */
const BANNERS = [
  {
    dias:[1,2,3,4,5],horaInicio:"11:00",horaFim:"15:00",
    imagem:"https://i.imgur.com/XhbtE1A.jpg",
    titulo:"Almoço Executivo",descricao:"Pratos selecionados com 10% de desconto no horário do almoço!"
  },
  {
    dias:[5,6],horaInicio:"18:00",horaFim:"23:59",
    imagem:"https://i.imgur.com/v45vDhc.jpg",
    titulo:"Happy Hour",descricao:"Drinks em dobro e petiscos especiais toda sexta e sábado!"
  }
];
function getBannerDoDia(){
  const d=new Date();const dia=d.getDay();const h=d.toTimeString().slice(0,5);
  return BANNERS.find(b=>b.dias.includes(dia)&&h>=b.horaInicio&&h<=b.horaFim)||null;
}

/* ====== DADOS DO CARDÁPIO ====== */
const MENU=[
  {cat:"Pratos Executivos",items:[
    {name:"Picanha Angus 200g",desc:"2 acompanhamentos à escolha.",price:"74,90",img:[]},
    {name:"Salmão Grelhado",desc:"Com arroz e legumes salteados.",price:"69,90",img:[],promo:"64,90"},
  ]},
  {cat:"Massas & Risotos",items:[
    {name:"Risoto de Filé",desc:"Cremoso e saboroso.",price:"59,90",img:[]},
    {name:"Spaghetti Frutos do Mar",desc:"Com toque de limão siciliano.",price:"59,90",img:[],promo:"56,90"},
  ]},
  {cat:"Sobremesas",items:[
    {name:"Petit Gâteau",desc:"Crocante por fora e cremoso por dentro.",price:"49,90",img:[]},
    {name:"Pudim Golden",desc:"Clássico e irresistível.",price:"34,90",img:[],promo:"29,90"},
  ]}
];

/* ====== GERAÇÃO DE PÁGINAS ====== */
const book=document.getElementById("book");
let pageIndex=0;let pages=[];
function renderPages(){
  book.innerHTML="";
  const capa=document.createElement("div");
  capa.className="page show";
  capa.innerHTML=`<div class="capa">
    <div class="box" id="capabox">
      <!-- Clique duas vezes para colocar a capa -->
      <div style="color:var(--muted);font-size:13px">Capa do Cardápio</div>
    </div>
    <h2>Mercatto Delícia</h2>
    <p style="color:var(--muted)">Passe as páginas →</p>
  </div>`;
  book.appendChild(capa);
  pages.push(capa);

  MENU.forEach(section=>{
    const pg=document.createElement("div");
    pg.className="page hide";
    pg.innerHTML=`<h2>${section.cat}</h2><div class="grid">
      ${section.items.map(i=>`
        <div class="card">
          <div class="thumb" ${i.img.length?`data-gallery='${JSON.stringify(i.img)}'`:''}>
            ${i.img.length?`<img src="${i.img[0]}">`:`<div class="noimg">Sem foto</div>`}
          </div>
          <div class="meta">
            <div class="name">${i.name}</div>
            <div class="desc">${i.desc}</div>
            <div class="price">R$ ${i.price}${i.promo?` <span style="color:#f59e0b">• ${i.promo}</span>`:""}</div>
          </div>
        </div>`).join('')}
    </div>`;
    book.appendChild(pg);
    pages.push(pg);
  });
}
renderPages();

/* ====== NAVEGAÇÃO ====== */
function showPage(i){
  pages.forEach((p,idx)=>p.classList.toggle("show",idx===i));
}
document.getElementById("nextBtn").onclick=()=>{if(pageIndex<pages.length-1){pageIndex++;showPage(pageIndex)}};
document.getElementById("prevBtn").onclick=()=>{if(pageIndex>0){pageIndex--;showPage(pageIndex)}};

/* ====== BUSCA ====== */
document.getElementById("search").addEventListener("input",e=>{
  const q=e.target.value.toLowerCase();
  document.querySelectorAll(".card").forEach(c=>{
    const t=c.innerText.toLowerCase();
    c.style.display=t.includes(q)?"":"none";
  });
});

/* ====== GALERIA ====== */
const modalGallery=document.getElementById("modalGallery");
const view=document.getElementById("galleryViewport");
const dots=document.getElementById("galleryDots");
let gallery=[],gindex=0;
function openGallery(imgs){
  gallery=imgs;gindex=0;renderGallery();
  modalGallery.classList.add("show");
}
function renderGallery(){
  view.innerHTML="";dots.innerHTML="";
  if(!gallery.length)return;
  const el=document.createElement("img");
  el.src=gallery[gindex];view.appendChild(el);
  gallery.forEach((_,i)=>{
    const d=document.createElement("div");
    d.className="dot"+(i===gindex?" active":"");
    d.onclick=()=>{gindex=i;renderGallery()};
    dots.appendChild(d);
  });
}
document.getElementById("gPrev").onclick=()=>{gindex=(gindex-1+gallery.length)%gallery.length;renderGallery()};
document.getElementById("gNext").onclick=()=>{gindex=(gindex+1)%gallery.length;renderGallery()};
book.addEventListener("click",e=>{
  const t=e.target.closest(".thumb");
  if(t&&t.dataset.gallery){openGallery(JSON.parse(t.dataset.gallery))}
});
modalGallery.onclick=e=>{if(e.target===modalGallery)modalGallery.classList.remove("show")};

/* ====== BANNER AUTOMÁTICO ====== */
window.addEventListener("load",()=>{
  const b=getBannerDoDia();
  const modal=document.getElementById("modalBanner");
  const cont=document.getElementById("bannerContent");
  if(b){
    cont.innerHTML=`<img src="${b.imagem}" alt="${b.titulo}">
      <h2>${b.titulo}</h2><p style="opacity:.8">${b.descricao}</p>`;
    modal.classList.add("show");
    setTimeout(()=>modal.classList.remove("show"),7000);
  }
});

/* ====== CAPA UPLOAD ====== */
document.addEventListener("dblclick",e=>{
  if(e.target.closest("#capabox")){
    const inp=document.createElement("input");
    inp.type="file";inp.accept="image/*";
    inp.onchange=()=>{
      const f=inp.files[0];
      if(f){const url=URL.createObjectURL(f);
        e.target.closest("#capabox").innerHTML=`<img src="${url}">`;
      }
    };
    inp.click();
  }
});
</script>
</body>
</html>
